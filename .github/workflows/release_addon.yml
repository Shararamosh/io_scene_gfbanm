name: Release Blender Addon
permissions: write-all
on:
  push:
    branches:
      - master
  workflow_dispatch:
    inputs:
      version:
        description: "version"
        required: true
        default: "1.0.0"
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
        - name: Build Addon
          uses: blenderkit/blender-addon-build@main
          with:
            name: io_scene_gfbanm
            exclude-files: ".git;.github;README.md"
  release:
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Release Addon
        uses: blenderkit/blender-addon-release@main
        with:
          release_name: Latest Release
          version: ${{github.event.inputs.version}}